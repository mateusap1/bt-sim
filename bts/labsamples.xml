<?xml version="1.0"?>
<root main_tree_to_execute="LabSamples" BTCPP_format="3" >
    <!-- ////////// -->
    <BehaviorTree ID="Auth">
        <Sequence>
		<Action ID="ReceiveBarcode" barcode="{barcode}"/>
		<Condition ID="CheckBarcode" barcode="{barcode}"/>
        </Sequence>
    </BehaviorTree>
    <!-- ////////// -->
    <BehaviorTree ID="Drawer">
        <Sequence>
            <Action ID="ReleaseDrawer"/>
            <Condition ID="WaitDrawerClose"/>
        </Sequence>
    </BehaviorTree>
    <!-- ////////// -->
    <BehaviorTree ID="LabSamples">
        <Fallback>
            <Sequence>
                <Sequence>
                    <MoveTo destination="medRoom"/>
                    <SubTree ID="Auth"/>
                    <SubTree ID="Drawer"/>
                </Sequence>
                <MoveTo destination="patientRoom"/>
                <Sequence>
                    <SubTree ID="Auth"/>
                    <SubTree ID="Drawer"/>
                </Sequence>
            </Sequence>
            <MoveTo destination="robotHome"/>
        </Fallback>
    </BehaviorTree>
    <!-- ////////// -->
    <TreeNodesModel>
        <SubTree ID="Auth"/>
        <Condition ID="CheckBarcode">
            <input_port name="barcode"/>
        </Condition>
        <SubTree ID="Drawer"/>
        <Action ID="MoveTo"
                editable="true">
            <input_port name="destination"/>
        </Action>
        <Action ID="ReceiveBarcode">
            <output_port name="barcode"/>
        </Action>
        <Action ID="ReleaseDrawer"/>
        <Condition ID="WaitDrawerClose"/>
    </TreeNodesModel>
    <!-- ////////// -->
</root>
